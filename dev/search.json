[{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to ggsurvfit","title":"Contributing to ggsurvfit","text":"outlines propose change ggsurvfit. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to ggsurvfit","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to ggsurvfit","text":"want make bigger change, please first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to ggsurvfit","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"ddsjoberg/ggsurvfit\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html. Pull request include unit testing new feature bug fix. Unit tests typically include testing using testthat package, testing images (.e. ggplots) using vdiffr package. test structure ggplot object, want first build plot using ggplot2::ggplot_build(). can programitcally test contents plot. Errors, warnings, messages created cli::cli_abort(), cli::cli_warn(), cli::cli_inform(). use convention first print error message, helpful message applies. example, New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":"cli::cli_abort(c(\"!\" = \"There was an error.\",                  \"i\" = \"a helpful message to resolve error\"))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to ggsurvfit","text":"Please note ggsurvfit project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 ggsurvfit authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"modifications-with-ggplot2","dir":"Articles","previous_headings":"","what":"Modifications with ggplot2","title":"Gallery","text":"Let’s begin showing default plot common modifications made ggplot2 functions. Expand axis show percentages 0% 100% Limit plot show 8 years follow-Add percent sign y-axis label Reduce padding plot area around curves Add additional tick marks x-axis Update color lines Using ggplot2 minimal theme  addition using additional {ggplot2} functions, helpful understand underlying functions used create figures. survival lines drawn geom_step() confidence interval geom_ribbon(). Users can pass additional arguments construction functions ggsurvfti(...) add_confidence_interval(...), respectively. example , use color fill aesthetic change colors unstratified estimate.","code":"gg_default <-   survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   labs(title = \"Default\")  gg_styled <-   gg_default +   coord_cartesian(xlim = c(0, 8)) +   scale_y_continuous(     limits = c(0, 1),     labels = scales::percent,      expand = c(0.01, 0)   ) +   scale_x_continuous(breaks = 0:9, expand = c(0.02, 0)) +   scale_color_manual(values = c('#54738E', '#82AC7C')) +   scale_fill_manual(values = c('#54738E', '#82AC7C')) +   theme_minimal() +   theme(legend.position = \"bottom\") +   guides(color = guide_legend(ncol = 1)) +   labs(     title = \"Modified\",     y = \"Percentage Survival\"   )  gg_default + gg_styled survfit2(Surv(time, status) ~ 1, data = df_colon) %>%   ggsurvfit(color = \"#508050\") +   add_confidence_interval(fill = \"#508050\") +   add_risktable() +   scale_ggsurvfit()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"risk-tables","dir":"Articles","previous_headings":"","what":"Risk Tables","title":"Gallery","text":"default risk table styling ready publication.  can also group risk table statistics rather stratum. Let’s also add additional time points statistics reported extend y axis.  Use add_risktable_strata_symbol() replace long stratum labels color symbol. default symbol colored rectangle can change UTF-8 symbol text string. example , ’ve updated symbol circle.  can customize risk table using themes add_risktable(...) arguments. example, use following code increase font size risk table text y-axis label.  can also use glue-like syntax place multiple statistics row risk table.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable() ggrisktable <-   survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable(risktable_group = \"risktable_stats\") +   scale_x_continuous(breaks = 0:9) +   scale_y_continuous(limits = c(0, 1)) ggrisktable ggrisktable +   add_risktable_strata_symbol(symbol = \"\\U25CF\", size = 10) survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(linewidth = 0.8) +   add_risktable(     risktable_height = 0.33,     size = 4, # increase font size of risk table statistics     theme =   # increase font size of risk table title and y-axis label       list(         theme_risktable_default(axis.text.y.size = 11,                                  plot.title.size = 11),         theme(plot.title = element_text(face = \"bold\"))       )   ) survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit() +   add_risktable(risktable_stats = \"{n.risk} ({cum.event})\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"quantiles-and-censor-markings","dir":"Articles","previous_headings":"","what":"Quantiles and Censor Markings","title":"Gallery","text":"Add guidelines survival quantiles markings censored patients using add_quantile() add_censor_mark(). add_quantile() function allows users place guidelines specifying either y-intercept x-intercept lines shall originate.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(linewidth = 0.8) +   add_censor_mark(size = 2, alpha = 0.2) +   add_quantile(y_value = 0.5, linetype = \"dotted\", color = \"grey30\", linewidth = 0.8) +   add_quantile(x_value = 5,  color = \"grey30\", linewidth = 0.8) +   scale_ggsurvfit()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"side-by-side","dir":"Articles","previous_headings":"","what":"Side-by-Side","title":"Gallery","text":"One favorite features {ggsurvfit} package {ggplot2} function may used modify plot risk tables still align primary plot. accomplished delaying construction risk tables plot printed. delayed build risk tables, must take one additional step placing figures side--side contain risk tables: must use ggsurvfit_build() function. function construct risk tables combine primary plot. plots built, can placed side--side {patchwork} {cowplot}.","code":"p <-   survfit2(Surv(time, status) ~ 1, df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable() +   scale_y_continuous(limits = c(0, 1)) +   scale_x_continuous(n.breaks = 7)  # build plot (which constructs the risktable) built_p <- ggsurvfit_build(p)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"patchwork","dir":"Articles","previous_headings":"Side-by-Side","what":"patchwork","title":"Gallery","text":"Combine patchwork::wrap_plots() use patchwork plot arithmetic, plot must wrapped patchwork::wrap_elements()","code":"wrap_plots(built_p, built_p, ncol = 2) wrap_elements(built_p) | wrap_elements(built_p)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"cowplot","dir":"Articles","previous_headings":"Side-by-Side","what":"cowplot","title":"Gallery","text":"Combine cowplot::plot_grid()","code":"cowplot::plot_grid(built_p, built_p, ncol = 2)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"p-values","dir":"Articles","previous_headings":"","what":"P-values","title":"Gallery","text":"Compare curves among stratum using add_p() function. P-values can placed either figure caption (default) plot area annotation.","code":"p <- survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit()  # place p-value in caption p1 <- p + add_pvalue(caption = \"Log-rank {p.value}\")  # place p-value as a plot annotation p2 <- p + add_pvalue(location  = \"annotation\", x = 8.5)  p1 + p2 +    patchwork::plot_layout(guides = \"collect\") &   theme(legend.position = \"bottom\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"scales","dir":"Articles","previous_headings":"","what":"Scales","title":"Gallery","text":"Unlike {ggplot2} functions, scales additive. means scale attribute modified one call scale_x_continuous(), second call scale_x_continuous() write changes made first. reason, ggsurvfit() ggcuminc() functions modify default {ggplot2} scales; rather, changes scales left user. , export helpful ggsurvfit-specific scales function help. scale_ggsurvfit() function apply default scales often seen survival figures: reduced plot padding, y-axis labels appear percentages, survival curves shown 0% 100% y-axis. example , utilize scale_ggsurvfit() make scale changes scales, , specifying breaks x-axis.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(linewidth = 1) +   add_confidence_interval() +   scale_ggsurvfit(x_scales = list(breaks = 0:9))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"transformations","dir":"Articles","previous_headings":"","what":"Transformations","title":"Gallery","text":"Show probability event rather probability free event transformations. Custom transformations also available.","code":"p <-   survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(type = \"risk\", linewidth = 0.8) +   add_confidence_interval() p"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"saving-plots","dir":"Articles","previous_headings":"","what":"Saving Plots","title":"Gallery","text":"{ggsurvfit} package plays well ggplot2::ggsave(), allows specify output file format, DPI, height width image, .","code":"path_to_image <- file.path(tempdir(), \"image.png\") path_to_image #> [1] \"/tmp/RtmpSswdSH/image.png\"  ggsave(file = path_to_image, plot = p) #> Saving 7.29 x 4.51 in image"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"extensions","dir":"Articles","previous_headings":"","what":"Extensions","title":"Gallery","text":"{ggsurvfit} functions written proper {ggplot2} geoms, can weave {ggplot2} functions ggplot2 extensions, {gghighlight} {ggeasy}.","code":"survfit2(Surv(time, status) ~ rx, data = df_colon) %>%   ggsurvfit(linewidth = 1) +   gghighlight::gghighlight(     strata == \"Levamisole+5-FU\",     calculate_per_facet = TRUE   ) +   ggeasy::easy_remove_legend() +   ggeasy::easy_y_axis_labels_size(size = 15) +   ggeasy::easy_x_axis_labels_size(size = 15) +   ggeasy::easy_y_axis_title_size(size = 15) +   ggeasy::easy_x_axis_title_size(size = 15)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"faceting","dir":"Articles","previous_headings":"","what":"Faceting","title":"Gallery","text":"Curves created {ggsurvfit} can also later faceted using {ggplot2}. Note, however, faceted curves include risk table. ggsurvfit() function calls tidy_survfit() create data frame used create figure. data frame, column named \"strata\", facet .","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   facet_wrap(~strata, nrow = 1) +   theme(legend.position = \"none\") +   scale_x_continuous(n.breaks = 6) +   labs(title = \"PFS by Duration between Surgery and Treatment\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"grey-scale-figures","dir":"Articles","previous_headings":"","what":"Grey-scale Figures","title":"Gallery","text":"may need black white figure achieved using grey-scale ggplot2 functions.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_confidence_interval() +   scale_color_grey() +   scale_fill_grey() +   labs(title = \"Grey Scale\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"kmunicate","dir":"Articles","previous_headings":"","what":"KMunicate","title":"Gallery","text":"get figures align guidelines outlined “Proposals Kaplan–Meier plots medical research survey stakeholder views: KMunicate.”, use theme_ggsurvfit_KMunicate() theme along function options.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(linetype_aes = TRUE) +   add_confidence_interval() +   add_risktable(     risktable_stats = c(\"n.risk\", \"cum.censor\", \"cum.event\")   ) +   theme_ggsurvfit_KMunicate() +   scale_y_continuous(limits = c(0, 1)) +   scale_x_continuous(expand = c(0.02, 0)) +   theme(legend.position = c(0.85, 0.85))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/gallery.html","id":"adjusted-cox-models","dir":"Articles","previous_headings":"","what":"Adjusted Cox Models","title":"Gallery","text":"ggsurvfit supports printing adjusted Cox Proportion Hazards Regression models. stratifying levels must wrapped strata() call RHS formula.","code":"library(survival)  coxph(Surv(time, status) ~ age + strata(surg), data = df_colon) %>%   survfit2() %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable() +   scale_y_continuous(limits = c(0, 1))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/themes.html","id":"plot-themes","dir":"Articles","previous_headings":"","what":"Plot Themes","title":"Themes","text":"ggsurvfit() ggcuminc() use theme_ggsurvfit_default() default {ggplot2} theme, similar ggplot2::theme_bw(). theme provides beautiful figures, may want modify . can use ggsurvfit(theme=) argument change default theme. can pass {ggplot2} theme argument, simply add theme using typical {ggplot2} syntax.  can see, either method passing theme results identical figure. can easily apply user-created theme theme exported ggplot2 package. construct custom theme, include ggplot2 calls list example .","code":"library(ggsurvfit) #> Loading required package: ggplot2 library(patchwork)  gg_theme_default1 <-    survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(theme = theme_ggsurvfit_default()) +   labs(title = \"Using `theme=` argument\")  gg_theme_default2 <-    survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(theme = NULL) +   theme_ggsurvfit_default() +   labs(title = \"Using ggplot `+`\")  gg_theme_default1 + gg_theme_default2 survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(theme = list(theme_classic(), theme(legend.position = \"top\"))) +   labs(title = \"Custom Plot Theme\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/articles/themes.html","id":"risk-table-themes","dir":"Articles","previous_headings":"","what":"Risk Table Themes","title":"Themes","text":"Similar plots , risk tables also come default theme. understand use risk table themes, one must first understand risk table . risk table placed plot ggplot created ggplot2::geom_text(). Unlike plot themes, risk table themes can passed via add_risktable(theme=).  typical theme appropriate risk table plot remove grid lines provide clean area display numbers risk. risk table , strata levels y-axis labels, “Risk” plot title. Another risk table theme adds box around statistics presented.  ’s possible replace stratum levels symbol, particularly helpful long group labels.  customizing risk table themes using add_risktable_strata_symbol(), note symbol added ggplot2::scale_y_discrete(); including theme uses discrete y scale cause conflict. need risk table theme currently available ggsurvfit, community-based themes welcome! Consider adding theme package.","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_risktable(     risktable_stats = \"n.risk\",     theme = theme_risktable_default()   ) survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_risktable(     risktable_stats = \"n.risk\",     theme = theme_risktable_boxed()   ) survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_risktable(risktable_stats = \"n.risk\") +   add_risktable_strata_symbol()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Daniel D. Sjoberg. Author, maintainer, copyright holder. Mark Baillie. Author. Steven Haesendonckx. Author. Tim Treis. Author.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sjoberg D, Baillie M, Haesendonckx S, Treis T (2023). ggsurvfit: Flexible Time--Event Figures. https://github.com/ddsjoberg/ggsurvfit, http://www.danieldsjoberg.com/ggsurvfit/.","code":"@Manual{,   title = {ggsurvfit: Flexible Time-to-Event Figures},   author = {Daniel D. Sjoberg and Mark Baillie and Steven Haesendonckx and Tim Treis},   year = {2023},   note = {https://github.com/ddsjoberg/ggsurvfit, http://www.danieldsjoberg.com/ggsurvfit/}, }"},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"Flexible Time-to-Event Figures","text":"ggsurvfit package eases creation time--event (aka survival) summary figures ggplot2. concise modular code creates images ready publication sharing. Competing risks cumulative incidence also supported via ggcuminc().","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"why-ggsurvfit","dir":"","previous_headings":"","what":"Why ggsurvfit?","title":"Flexible Time-to-Event Figures","text":"Use ggplot2 functions: ggsurvfit add-function (e.g. add_confidence_interval(), add_risktable(), etc.) written proper ggplot2 ‘geom’, meaning package functions can woven ggplot2 functions seamlessly. don’t need learn style plot within ggsurvfit functions: rather, rely suite ggplot2 functions already know. Publishable Legends: Raw variable names appear figure legend, e.g. \"sex=Female\". Limitless Customization: can modify x-axis scales plot feature risk table still align plot. Simple Saving: Save individual images easily ggplot2::ggsave().","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Flexible Time-to-Event Figures","text":"Install ggsurvfit CRAN : can install development version GitHub :","code":"install.packages(\"ggsurvfit\") # install.packages(\"devtools\") devtools::install_github(\"ddsjoberg/ggsurvfit\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"Flexible Time-to-Event Figures","text":"Review figure gallery many examples. code constructs basic {ggsurvfit} figure without customization. figure created {ggsurvfit} can customized using {ggplot2} functions.","code":"library(ggsurvfit) #> Loading required package: ggplot2  p <- survfit2(Surv(time, status) ~ surg, data = df_colon) |>   ggsurvfit(linewidth = 1) +   add_confidence_interval() +   add_risktable() +   add_quantile(y_value = 0.6, color = \"gray50\", linewidth = 0.75) p +   # limit plot to show 8 years and less   coord_cartesian(xlim = c(0, 8)) +   # update figure labels/titles   labs(     y = \"Percentage Survival\",     title = \"Recurrence by Time From Surgery to Randomization\",   ) +   # reduce padding on edges of figure and format axes   scale_y_continuous(label = scales::percent,                       breaks = seq(0, 1, by = 0.2),                      expand = c(0.015, 0)) +   scale_x_continuous(breaks = 0:10,                       expand = c(0.02, 0))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"survfit2-vs-survfit","dir":"","previous_headings":"","what":"survfit2() vs survfit()","title":"Flexible Time-to-Event Figures","text":"functions identical inputs, need survfit2()? survfit2() tracks environment function called, resulting following benefits. can reliably remove raw variable names figure legend, e.g. SEX=Female. P-values can calculated survfit_p() added figures. items often possible using survfit(). However, utilizing calling environment assured correct elements found, rather crossing fingers search path contains needed elements.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/index.html","id":"cdisc-adam-adtte","dir":"","previous_headings":"","what":"CDISC ADaM ADTTE","title":"Flexible Time-to-Event Figures","text":"package also includes gems using CDISC ADaM ADTTE data model. columns \"PARAM\" \"PARAMCD\" present data frame passed survfit2(), values used construct default labels ggsurvfit() figure. event indicator ADTTE data sets named \"CNSR\" coded opposite way survival package expects outcomes—1 = 'censored' 0 = 'event'. difference creates opportunity errors introduced analysis. ggsurvfit package exports function called Surv_CNSR() resolve concern. function creates survival object (e.g. survival::Surv()) uses CDISC ADaM ADTTE coding conventions default values. function can used ggsurvfit well package uses survival::Surv().","code":"survfit(Surv_CNSR() ~ 1, adtte) #> Call: survfit(formula = Surv_CNSR() ~ 1, data = adtte) #>  #>         n events median 0.95LCL 0.95UCL #> [1,] 2199    755    3.2     3.1    3.56"},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Survival Outcome from CDISC Data — Surv_CNSR","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"aim Surv_CNSR() map inconsistency data convention survival package CDISC ADaM ADTTE data model. function creates survival object (e.g. survival::Surv()) uses CDISC ADaM ADTTE coding conventions converts arguments status/event variable convention used survival package. AVAL CNSR arguments passed survival::Surv(time = AVAL, event = 1 - CNSR, type = \"right\", origin = 0).","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"","code":"Surv_CNSR(AVAL, CNSR)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"AVAL follow-time. follow-time assumed originate zero. argument passed, default value column/vector named AVAL. CNSR censoring indicator 1=censored 0=death/event. argument passed, default value column/vector named CNSR.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"Object class 'Surv'","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"Surv_CNSR() function creates survival object utilizing expected data structure CDISC ADaM ADTTE data model, mapping CDISC ADaM ADTTE coding conventions expected status/event variable convention used survival package---specifically, coding convention used status/event indicator. survival package expects status/event indicator following format: 0=alive, 1=dead. accepted choices TRUE/FALSE (TRUE = death) 1/2 (2=death). final risky option omit indicator variable, case subjects assumed event. CDISC ADaM ADTTE data model adopts different coding convention event/status indicator. Using convention, event/status variable named 'CNSR' uses following coding: censor = 1, status/event = 0.","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/Surv_CNSR.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Survival Outcome from CDISC Data — Surv_CNSR","text":"","code":"# Use the `Surv_CNSR()` function with ggsurvfit functions survfit2(formula = Surv_CNSR() ~ STR01, data = adtte) %>%   ggsurvfit() +   add_confidence_interval()   # Use the `Surv_CNSR()` function with functions from other packages as well survival::survfit(Surv_CNSR() ~ STR01, data = adtte) #> Call: survfit(formula = Surv_CNSR() ~ STR01, data = adtte) #>  #>                   n events median 0.95LCL 0.95UCL #> STR01=Negative  893    166   2.20    2.15    2.39 #> STR01=Positive 1306    589   3.41    3.19    3.63 survival::survreg(Surv_CNSR() ~ STR01 + AGE, data = adtte) %>%   broom::tidy() #> # A tibble: 4 × 5 #>   term          estimate std.error statistic  p.value #>   <chr>            <dbl>     <dbl>     <dbl>    <dbl> #> 1 (Intercept)    0.943     0.147        6.40 1.56e-10 #> 2 STR01Positive  0.213     0.0534       3.98 6.78e- 5 #> 3 AGE            0.00376   0.00221      1.70 8.97e- 2 #> 4 Log(scale)    -0.543     0.0306     -17.8  1.47e-70"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_censor_mark.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Censor Marking — add_censor_mark","title":"Add Censor Marking — add_censor_mark","text":"Add marking figure represent time observations censored.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_censor_mark.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Censor Marking — add_censor_mark","text":"","code":"add_censor_mark(...)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_censor_mark.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Censor Marking — add_censor_mark","text":"... arguments passed passed ggplot2::geom_point(...) defaults shape = 3 size = 2","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_censor_mark.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Censor Marking — add_censor_mark","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_censor_mark.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Censor Marking — add_censor_mark","text":"","code":"survfit2(Surv(time, status) ~ 1, data = df_lung) %>%   ggsurvfit() +   add_confidence_interval() +   add_censor_mark()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_confidence_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Confidence Interval — add_confidence_interval","title":"Add Confidence Interval — add_confidence_interval","text":"Add confidence interval represented either ribbon lines.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_confidence_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Confidence Interval — add_confidence_interval","text":"","code":"add_confidence_interval(type = c(\"ribbon\", \"lines\"), ...)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_confidence_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Confidence Interval — add_confidence_interval","text":"type string indicating type confidence interval draw. Must one c(\"ribbon\", \"lines\") ... arguments pass geom. type = 'ribbon': Defaults ggplot2::geom_ribbon(alpha = 0.2, color = NA, ...) type = 'lines': Defaults ggplot2::geom_step(linetype = \"dashed\", na.rm = TRUE, ...)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_confidence_interval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Confidence Interval — add_confidence_interval","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_confidence_interval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Confidence Interval — add_confidence_interval","text":"","code":"survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit() +   add_confidence_interval()   survfit2(Surv(time, status) ~ 1, data = df_lung) %>%   ggsurvfit() +   add_confidence_interval(type = \"lines\")"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_legend_title.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Legend Title — add_legend_title","title":"Add Legend Title — add_legend_title","text":"Add default custom title figure legend.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_legend_title.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Legend Title — add_legend_title","text":"","code":"add_legend_title(title = NULL)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_legend_title.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Legend Title — add_legend_title","text":"title string override default legend title. Default NULL","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_legend_title.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Legend Title — add_legend_title","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_legend_title.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Legend Title — add_legend_title","text":"","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() +   add_legend_title()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_pvalue.html","id":null,"dir":"Reference","previous_headings":"","what":"Add p-value — add_pvalue","title":"Add p-value — add_pvalue","text":"add_pvalue(\"caption\"): Add p-value figure via ggplot2::labs(caption=) add_pvalue(\"annotation\"): Add p-value text annotation via ggplot2::annotation(\"text\") P-values calculated survival::survdiff() tidycmprsk::glance(). Examples custom placement located help file survfit_p(). competing risks figure includes multiple outcomes, p-value comparing stratum first outcome can placed.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_pvalue.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add p-value — add_pvalue","text":"","code":"add_pvalue(   location = c(\"caption\", \"annotation\"),   caption = \"{p.value}\",   prepend_p = TRUE,   pvalue_fun = format_p,   rho = 0,   ... )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_pvalue.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add p-value — add_pvalue","text":"location string indicating place p-value. Must one c(\"caption\", \"annotation\") caption string placed caption/annotation. String processed glue::glue(), default \"{p.value}\" prepend_p prepend \"p=\" formatted p-value pvalue_fun function round style p-value rho argument passed  survival::survdiff(rho=) ... arguments passed ggplot2::annotate(). Commonly used arguments x= y= place p-value specified coordinates plot.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_pvalue.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add p-value — add_pvalue","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_pvalue.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add p-value — add_pvalue","text":"","code":"survfit2(Surv(time, status) ~ surg, df_colon) %>%   ggsurvfit() +   add_pvalue(caption = \"Log-rank {p.value}\")   survfit2(Surv(time, status) ~ surg, df_colon) %>%   ggsurvfit() +   add_pvalue(\"annotation\", size = 5)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_quantile.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Quantile Annotation — add_quantile","title":"Add Quantile Annotation — add_quantile","text":"Add quantile information annotated plot.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_quantile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Quantile Annotation — add_quantile","text":"","code":"add_quantile(y_value = NULL, x_value = NULL, ...)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_quantile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Quantile Annotation — add_quantile","text":"y_value, x_value Numeric value line segment drawn. Default y_value=0.5 y_value x_value unassigned. ... Named arguments passed ggplot2::geom_segment() default linetype = 2","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_quantile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Quantile Annotation — add_quantile","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_quantile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Quantile Annotation — add_quantile","text":"","code":"survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit() +   add_quantile(linetype = 2) +   scale_ggsurvfit()   survfit2(Surv(time, status) ~ 1, data = df_lung) %>%   ggsurvfit() +   add_quantile(linetype = 2) +   add_quantile(y_value = 0.9, linetype = 3) +   scale_ggsurvfit()   survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit() +   add_quantile(linetype = 2, y_value = NULL, x_value = 10) +   scale_ggsurvfit()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":null,"dir":"Reference","previous_headings":"","what":"Add risk table — add_risktable","title":"Add risk table — add_risktable","text":"Add risk tables plot showing number risk, events observed, number censored observations.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add risk table — add_risktable","text":"","code":"add_risktable(   times = NULL,   risktable_stats = c(\"n.risk\", \"cum.event\"),   risktable_group = c(\"auto\", \"strata\", \"risktable_stats\"),   risktable_height = NULL,   stats_label = NULL,   combine_groups = FALSE,   theme = theme_risktable_default(),   size = 3.5,   ... )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add risk table — add_risktable","text":"times numeric vector times risk table values placed. Default times shown x-axis. times passed modify tick marks shown figure. modify tick marks shown, use ggplot2::scale_x_continuous(breaks=). risktable_stats character vector statistics show risk table. Must one c(\"n.risk\", \"cum.event\", \"cum.censor\", \"n.event\", \"n.censor\"). Default c(\"n.risk\", \"cum.event\"). \"n.risk\" Number patients risk \"cum.event\" Cumulative number observed events \"cum.censor\" Cumulative number censored observations \"n.event\" Number events time interval \"n.censor\" Number censored observations time interval See additional details . risktable_group String indicating grouping variable risk tables. Default \"auto\" select \"strata\" \"risktable_stats\" based context. \"strata\" groups risk tables per stratum present. \"risktable_stats\" groups risk tables per risktable_stats. risktable_height numeric value 0 1 indicates proportion final plot risk table occupy. stats_label named vector list custom labels. Names statistics risktable_stats= value custom label. combine_groups logical indicating whether combine statistics risk table across groups. Default FALSE theme risk table theme. Default theme_risktable_default() size, ... arguments passed ggplot2::geom_text(...). Pass arguments like, size = 4 increase size statistics presented table.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add risk table — add_risktable","text":"ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"customize-statistics","dir":"Reference","previous_headings":"","what":"Customize Statistics","title":"Add risk table — add_risktable","text":"can customize statistics risk table displayed utilizing glue-like syntax risktable_stats argument. example, prefer number risk number events row, can use risktable_stats = \"{n.risk} ({cum.event})\". can customize table include risk estimates using elements c(\"estimate\", \"conf.low\", \"conf.high\", \"std.error\"). using elements, likely need include function round estimates multiply 100.","code":"add_risktable(   risktable_stats =     c(\"{n.risk} ({cum.event})\",       \"{round(estimate*100)}% ({round(conf.low*100)}, {round(conf.high*100)})\"),   stats_label = c(\"At Risk (Cum. Events)\", \"Survival (95% CI)\") )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"competing-risks","dir":"Reference","previous_headings":"","what":"Competing Risks","title":"Add risk table — add_risktable","text":"ggcuminc() can plot multiple competing events. \"cum.event\" \"n.event\" statistics sum events across outcomes shown plot.","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add risk table — add_risktable","text":"","code":"p <-   survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit() +   add_censor_mark() +   add_confidence_interval()  # using the function defaults p + add_risktable()   # change the statistics shown and the label p +   add_risktable(     risktable_stats = \"n.risk\",     stats_label = list(n.risk = \"Number at Risk\"),   )   p +   add_risktable(     risktable_stats = \"{n.risk} ({cum.event})\"   )   p +   add_risktable(     risktable_stats = c(\"n.risk\", \"cum.event\"),     combine_groups = TRUE   )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable_strata_symbol.html","id":null,"dir":"Reference","previous_headings":"","what":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","title":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","text":"Replace stratum level names color symbol risk tables. Use function stratum level names long.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable_strata_symbol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","text":"","code":"add_risktable_strata_symbol(   symbol = NULL,   size = 15,   face = \"bold\",   vjust = 0.3,   ... )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable_strata_symbol.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","text":"symbol UTF-8 code shape replace strata level . Default rectangle (\"\\U25AC\"). common options circle (\"\\U25CF\") diamond (\"\\U25C6\"). symbol common string pass , string acceptable. size, face, vjust, ... arguments passed function similar ggtext::element_markdown()","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable_strata_symbol.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/add_risktable_strata_symbol.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Use Symbol for Strata in Risk Table — add_risktable_strata_symbol","text":"","code":"p <-   survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit(linewidth = 1) +   add_confidence_interval() +   add_risktable(risktable_group = \"risktable_stats\")   p + add_risktable_strata_symbol()   p + add_risktable_strata_symbol(symbol = \"\\U25CF\", size = 10)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/adtte.html","id":null,"dir":"Reference","previous_headings":"","what":"Example phase III clinical trial data set — adtte","title":"Example phase III clinical trial data set — adtte","text":"Background example simulated data set based large phase III clinical trials breast cancer ALTTO trial https://ascopubs.org/doi/abs/10.1200/JCO.2015.62.1797. example “trial” aims determine combination two therapies tablemab (T) plus vismab (V) improves outcomes metastatic human epidermal growth factor 2–positive breast cancer increases pathologic complete response neoadjuvant setting (.e. treatment given first step shrink tumor main treatment surgery).","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/adtte.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example phase III clinical trial data set — adtte","text":"","code":"adtte"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/adtte.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example phase III clinical trial data set — adtte","text":"data set contains following variables: STUDYID study identifier. code unique clinical trial SUBJID subject identifier. Numeric ID unique patient USUBJID unique subject identifier. Text ID combining study patient IDs AGE age randomisation (years) STR01 Hormone receptor status randomisation STR01N Hormone receptor positive (Numeric) STR01L Hormone receptor positive (Long format) STR02 Prior Radiotherapy randomisation STR02N Prior Radiotherapy randomisation (Numeric) STR02L Prior Radiotherapy randomisation (Long format) TRT01P Planned treatment assigned randomisation TRT01PN Planned treatment assigned randomisation (Numeric) PARAM Analysis parameter: Progression free survival PARAMCD Analysis parameter code AVAL Analysis value (time event (years) CNSR Censoring (0 = Event, 1 = Censored) EVNTDESC Event description CNSDTDSC Censoring description DCTREAS Discontinuation study reason","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/adtte.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example phase III clinical trial data set — adtte","text":"https://github.com/VIS-SIG/Wonderful-Wednesdays/tree/master/data/2020/2020-04-08","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/adtte.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Example phase III clinical trial data set — adtte","text":"trial four treatment arms, patients centrally confirmed human epidermal growth factor 2-positive early breast cancer randomly assigned 1 year adjuvant therapy V, T, sequence (T V), combination (T+V) 52 weeks. primary end point progression-free survival (PFS) defined Cancer.gov: '“length time treatment disease, cancer, patient lives disease get worse. clinical trial, measuring progression-free survival one way see well new treatment works”'. number baseline measurements (taken randomization) also included age, hormone receptor status prior radiotherapy treatment. Additional details reasons study discontinuation censoring event description also included. data set adopts abridged version CDISC ADaM ADTTE time event data model. See info CDISC ADaM data standards https://www.cdisc.org/standards/foundational/adam specifically ADTTE time event data model https://www.cdisc.org/standards/foundational/adam/adam-basic-data-structure-bds-time-event-tte-analyses-v1-0.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_colon.html","id":null,"dir":"Reference","previous_headings":"","what":"Formatted Copy of survival::colon — df_colon","title":"Formatted Copy of survival::colon — df_colon","text":"copy colon data set exported survival package. data set, however, column labels, numeric categorical variables now factors assigned levels, include recurrence outcome.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_colon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Formatted Copy of survival::colon — df_colon","text":"","code":"df_colon"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_colon.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Formatted Copy of survival::colon — df_colon","text":"object class tbl_df (inherits tbl, data.frame) 929 rows 14 columns.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_lung.html","id":null,"dir":"Reference","previous_headings":"","what":"Formatted Copy of survival::lung — df_lung","title":"Formatted Copy of survival::lung — df_lung","text":"copy lung data set exported survival package. data set, however, column labels numeric categorical variables now factors assigned levels.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_lung.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Formatted Copy of survival::lung — df_lung","text":"","code":"df_lung"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/df_lung.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Formatted Copy of survival::lung — df_lung","text":"object class tbl_df (inherits tbl, data.frame) 228 rows 10 columns.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/format_p.html","id":null,"dir":"Reference","previous_headings":"","what":"Format p-value — format_p","title":"Format p-value — format_p","text":"Round format p-values","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/format_p.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format p-value — format_p","text":"","code":"format_p(x, digits = 1)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/format_p.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format p-value — format_p","text":"x numeric vector p-values digits number digits large p-values rounded . Default 2, must one 1, 2, 3.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/format_p.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format p-value — format_p","text":"string","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/format_p.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format p-value — format_p","text":"","code":"p_vec <- c(0.00001, 0.01111, 0.0500000, 0.15, 0.99999) format_p(p_vec) #> [1] \"<0.001\" \"0.011\"  \"0.050\"  \"0.15\"   \">0.9\"   format_p(p_vec, 2) #> [1] \"<0.001\" \"0.011\"  \"0.050\"  \"0.15\"   \">0.99\"  format_p(p_vec, 3) #> [1] \"<0.001\" \"0.011\"  \"0.050\"  \"0.150\"  \">0.999\""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Cumulative Incidence — ggcuminc","title":"Plot Cumulative Incidence — ggcuminc","text":"Plot cumulative incidence object created tidycmprsk::cuminc() multi-state object created survfit2(). Read multi-state models .","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Cumulative Incidence — ggcuminc","text":"","code":"ggcuminc(   x,   outcome = NULL,   linetype_aes = FALSE,   theme = theme_ggsurvfit_default(),   ... )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Cumulative Incidence — ggcuminc","text":"x 'survfit' object created survfit2() outcome string indicating outcome(s) include plot. Default include first competing event. linetype_aes logical indicating whether add ggplot2::aes(linetype = strata) ggplot2::geom_step() call. strata present, resulting figure mix various line types stratum. theme survfit theme. Default theme_ggsurvfit_default() ... arguments passed ggplot2::geom_step(...), e.g. size = 2","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Cumulative Incidence — ggcuminc","text":"ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Cumulative Incidence — ggcuminc","text":"use cmprsk::cuminc()? implementation cmprsk::cuminc() provide data required construct risk table. Moreover, tidycmprsk::cuminc() user-friendly interface making easy learn use.","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggcuminc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Cumulative Incidence — ggcuminc","text":"","code":"# \\donttest{ library(tidycmprsk)  cuminc(Surv(ttdeath, death_cr) ~ trt, trial) %>%   ggcuminc(outcome = \"death from cancer\") +   add_confidence_interval() +   add_risktable()   cuminc(Surv(ttdeath, death_cr) ~ trt, trial) %>%   ggcuminc(outcome = c(\"death from cancer\", \"death other causes\")) +   add_risktable()   # using the survival multi-state model survfit2(Surv(ttdeath, death_cr) ~ trt, trial) %>%   ggcuminc(outcome = \"death from cancer\") +   add_confidence_interval() +   add_risktable()  # }"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ggsurvfit: Flexible Time-to-Event Figures — ggsurvfit-package","title":"ggsurvfit: Flexible Time-to-Event Figures — ggsurvfit-package","text":"Ease creation time--event (.e. survival) endpoint figures. modular functions create figures ready publication. functions add modify figure written proper 'ggplot2' geoms stat methods, allowing functions package combined function customization 'ggplot2' 'ggplot2' extension packages.","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ggsurvfit: Flexible Time-to-Event Figures — ggsurvfit-package","text":"Maintainer: Daniel D. Sjoberg danield.sjoberg@gmail.com (ORCID) [copyright holder] Authors: Mark Baillie bailliem@gmail.com Steven Haesendonckx shaesen2@.jnj.com (ORCID) Tim Treis tim.treis@outlook.de (ORCID)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Survival Probability — ggsurvfit","title":"Plot Survival Probability — ggsurvfit","text":"Plot survival probabilities (transformations) using results survfit2() survival::survfit(); although, former recommend best experience ggsurvfit package.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Survival Probability — ggsurvfit","text":"","code":"ggsurvfit(   x,   type = \"survival\",   linetype_aes = FALSE,   theme = theme_ggsurvfit_default(),   ... )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Survival Probability — ggsurvfit","text":"x 'survfit' object created survfit2() type type statistic report. Available Kaplan-Meier estimates . Default \"survival\". Must one following: linetype_aes logical indicating whether add ggplot2::aes(linetype = strata) ggplot2::geom_step() call. strata present, resulting figure mix various line types stratum. theme survfit theme. Default theme_ggsurvfit_default() ... arguments passed ggplot2::geom_step(...), e.g. size = 2","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Survival Probability — ggsurvfit","text":"ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Survival Probability — ggsurvfit","text":"function creates ggplot figure 'survfit' object. better understand modify figure, review simplified code used internally:","code":"survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   tidy_survfit() %>%   ggplot(aes(x = time, y = estimate, y              min = conf.low, ymax = conf.low,              color = strata, fill = strata)) +   geom_step()"},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Survival Probability — ggsurvfit","text":"","code":"# Default publication ready plot survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit()   # Changing statistic type survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit(type = \"cumhaz\")   # Configuring KM line type to vary by strata survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit(linetype_aes = TRUE)   # Customizing the plot to your needs survfit2(Surv(time, status) ~ 1, data = df_lung) %>%   ggsurvfit() +   add_censor_mark() +   add_confidence_interval() +   add_quantile() +   add_risktable()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit_build.html","id":null,"dir":"Reference","previous_headings":"","what":"Build 'ggsurvfit' Object — ggsurvfit_build","title":"Build 'ggsurvfit' Object — ggsurvfit_build","text":"Function takes object created ggsurvfit() ggcuminc() prepares plot printing. plot also risk table, function build risk table plots return either list plots combined using patchwork::wrap_plots(). can particularly useful like place figures risk tables side--side.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit_build.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build 'ggsurvfit' Object — ggsurvfit_build","text":"","code":"ggsurvfit_build(x, combine_plots = TRUE)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit_build.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build 'ggsurvfit' Object — ggsurvfit_build","text":"x object class 'ggsurvfit' 'ggcuminc' combine_plots logical indicating whether combine primary plot risk tables. TRUE, plot risk table(s) combined patchwork::wrap_plots(). FALSE plot risk tables, returned list gtable grobs. Default TRUE.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit_build.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build 'ggsurvfit' Object — ggsurvfit_build","text":"list ggplot2 objects single ggplot2 object","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/ggsurvfit_build.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build 'ggsurvfit' Object — ggsurvfit_build","text":"","code":"# construct plot p <-   survfit2(Surv(time, status) ~ surg, df_colon) %>%   ggsurvfit() +   add_risktable() +   scale_y_continuous(limits = c(0, 1))  # build plots built_p <- ggsurvfit_build(p, combine_plots = FALSE)  # reconstruct original figure print with risktables patchwork::wrap_plots(   built_p[[1]],   built_p[[2]],   built_p[[3]],   ncol = 1,   heights = c(0.70, 0.15, 0.15) )   # place plots side-by-side (plots must be built before placement with patchwork) patchwork::wrap_plots(   ggsurvfit_build(p),   ggsurvfit_build(p),   ncol = 2 )"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/grid.draw_ggsurvfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Draw ggsurvfit object — grid.draw_ggsurvfit","title":"Draw ggsurvfit object — grid.draw_ggsurvfit","text":"grid::grid.draw() methods objects classes 'ggsurvfit' 'ggcuminc'. implemented allow users directly call ggplot2::ggsave() 'ggsurvfit' figures.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/grid.draw_ggsurvfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Draw ggsurvfit object — grid.draw_ggsurvfit","text":"","code":"# S3 method for ggsurvfit grid.draw(x, recording = TRUE)  # S3 method for ggcuminc grid.draw(x, recording = TRUE)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/grid.draw_ggsurvfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Draw ggsurvfit object — grid.draw_ggsurvfit","text":"x object class 'ggsurvfit' 'ggcuminc' recording logical value indicate whether drawing     operation recorded Grid display list.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/grid.draw_ggsurvfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Draw ggsurvfit object — grid.draw_ggsurvfit","text":"None","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/grid.draw_ggsurvfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Draw ggsurvfit object — grid.draw_ggsurvfit","text":"","code":"survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit() %>%   grid.draw()   library(tidycmprsk) cuminc(Surv(ttdeath, death_cr) ~ trt, trial) %>%   ggcuminc() %>%   grid.draw() #> Plotting outcome \"death from cancer\"."},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/print_ggsurvfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Print ggsurvfit object — print_ggsurvfit","title":"Print ggsurvfit object — print_ggsurvfit","text":"Print ggsurvfit object","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/print_ggsurvfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print ggsurvfit object — print_ggsurvfit","text":"","code":"# S3 method for ggsurvfit print(x, ...)  # S3 method for ggcuminc print(x, ...)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/print_ggsurvfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print ggsurvfit object — print_ggsurvfit","text":"x object class 'ggsurvfit' 'ggcuminc' ... dots future extensions must empty.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/print_ggsurvfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print ggsurvfit object — print_ggsurvfit","text":"printed ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/print_ggsurvfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print ggsurvfit object — print_ggsurvfit","text":"","code":"print(survfit2(Surv(time, status) ~ surg, data = df_colon)) #> Call: survfit(formula = Surv(time, status) ~ surg, data = df_colon) #>  #>                                    n events median 0.95LCL 0.95UCL #> surg=Limited Time Since Surgery  682    327     NA    4.77      NA #> surg=Extended Time Since Surgery 247    141   3.03    2.01    5.55"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. dplyr %>% ggplot2 %+%, ggplot_add grid grid.draw survival Surv, survfit","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/scale_ggsurvfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Scales — scale_ggsurvfit","title":"Apply Scales — scale_ggsurvfit","text":"common figure created package survival curve. scale applies modifications often seen figures. scale_y_continuous(expand = c(0.025, 0), limits = c(0, 1), label = scales::label_percent()). scale_x_continuous(expand = c(0.015, 0), n.breaks = 8) use function, must include scale specifications appear scale_x_continuous() scale_y_continuous(). example, common need specify x-axis break points. scale_ggsurvfit(x_scales=list(breaks=0:9)). reset settings ggplot2 default, set value NULL, e.g. y_scales = list(limits = NULL).","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/scale_ggsurvfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Scales — scale_ggsurvfit","text":"","code":"scale_ggsurvfit(x_scales = list(), y_scales = list())"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/scale_ggsurvfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Scales — scale_ggsurvfit","text":"x_scales named list arguments passed ggplot2::scale_x_continuous(). y_scales named list arguments passed ggplot2::scale_y_continuous().","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/scale_ggsurvfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Scales — scale_ggsurvfit","text":"ggplot2 figure","code":""},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/scale_ggsurvfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply Scales — scale_ggsurvfit","text":"","code":"ggsurvfit <-   survfit2(Surv(time, status) ~ surg, data = df_colon) %>%   ggsurvfit(linewidth = 1) +   add_confidence_interval()  # use the function defaults ggsurvfit + scale_ggsurvfit()   # specify additional scales ggsurvfit +   scale_ggsurvfit(x_scales = list(breaks = seq(0, 8, by = 2)))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":null,"dir":"Reference","previous_headings":"","what":"Step ribbon statistic — stepribbon","title":"Step ribbon statistic — stepribbon","text":"Provides stairstep values ribbon plots","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Step ribbon statistic — stepribbon","text":"","code":"stat_stepribbon(   mapping = NULL,   data = NULL,   geom = \"ribbon\",   position = \"identity\",   na.rm = FALSE,   show.legend = NA,   inherit.aes = TRUE,   direction = \"hv\",   ... )  StatStepribbon"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Step ribbon statistic — stepribbon","text":"object class StatStepRibbon (inherits Stat, ggproto, gg) length 3.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Step ribbon statistic — stepribbon","text":"mapping Set aesthetic mappings created aes(). specified inherit.aes = TRUE (default), combined default mapping top level plot. must supply mapping plot mapping. data data displayed layer. three options: NULL, default, data inherited plot data specified call ggplot(). data.frame, object, override plot data. objects fortified produce data frame. See fortify() variables created. function called single argument, plot data. return value must data.frame, used layer data. function can created formula (e.g. ~ head(.x, 10)). geom geom use; defaults \"ribbon\" position Position adjustment, either string naming adjustment (e.g. \"jitter\" use position_jitter), result call position adjustment function. Use latter need change settings adjustment. na.rm FALSE, default, missing values removed warning. TRUE, missing values silently removed. show.legend logical. layer included legends? NA, default, includes aesthetics mapped. FALSE never includes, TRUE always includes. can also named logical vector finely select aesthetics display. inherit.aes FALSE, overrides default aesthetics, rather combining . useful helper functions define data aesthetics inherit behaviour default plot specification, e.g. borders(). direction hv horizontal-vertical steps, vh vertical-horizontal steps ... arguments passed layer(). often aesthetics, used set aesthetic fixed value, like colour = \"red\" size = 3. may also parameters paired geom/stat.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Step ribbon statistic — stepribbon","text":"ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Step ribbon statistic — stepribbon","text":"https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/stepribbon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Step ribbon statistic — stepribbon","text":"","code":"survfit(Surv(time, status) ~ 1, data = df_lung) %>%   survival::survfit0() %>%   broom::tidy() %>%   ggplot(aes(x = time, y = estimate, ymin = conf.low, ymax = conf.high)) +   geom_step() +   geom_ribbon(stat = \"stepribbon\", alpha = 0.2)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":null,"dir":"Reference","previous_headings":"","what":"Create survival curves — survfit2","title":"Create survival curves — survfit2","text":"Simple wrapper survival::survfit() except environment also included returned object. Use function functions package ensure elements calculable.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create survival curves — survfit2","text":"","code":"survfit2(formula, ...)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create survival curves — survfit2","text":"formula formula object, must      Surv object       response left ~ operator , desired, terms       separated + operators right.      One terms may strata object.     single survival curve right hand side ~ 1. ... Arguments passed survival::survfit.formula data data frame interpret variables named formula,      subset weights arguments. weights weights must nonnegative strongly recommended       strictly positive, since zero weights ambiguous, compared      use subset argument. subset expression saying subset rows data      used fit. na.action missing-data filter function, applied model frame,      subset argument used.      Default options()$na.action. stype method used estimation survival curve:     1 = direct,  2 = exp(cumulative hazard). ctype method used estimation cumulative     hazard: 1 = Nelson-Aalen formula, 2 = Fleming-Harrington correction     tied events. id identifies individual subjects, given person can multiple     lines data. cluster used group observations infinitesimal     jackknife variance estimate, defaults value id. robust logical, function compute robust variance.     multi-state survival curves true default.     single state data see details, . istate multi-state models, identifies initial state     subject observation timefix process times aeqSurv function   eliminate potential roundoff issues. etype variable giving type event.  superseded     multi-state Surv objects deprecated; see example . error argument longer used","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create survival curves — survfit2","text":"survfit2 object","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":"survfit-vs-survfit-","dir":"Reference","previous_headings":"","what":"survfit2() vs survfit()","title":"Create survival curves — survfit2","text":"functions identical inputs, need survfit2()? difference survfit2() survival::survfit() former tracks environment call function made. definition survfit2() unremarkably simple:   environment needed ensure survfit call can accurately reconstructed parsed point post estimation. call parsed p-values reported labels created. example, raw variable names appear output stratified survfit() result, e.g. \"sex=Female\". using survfit2(), originating data frame formula may parsed raw variable names removed. functions package work survfit2() survfit(); however, output styled preferable format survfit2().","code":"survfit2 <- function(formula, ...) {   # construct survfit object   survfit <- survival::survfit(formula, ...)    # add the environment   survfit$.Environment = <calling environment>    # add class and return   class(survfit) <- c(\"survfit2\", \"survfit\")   survfit }"},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create survival curves — survfit2","text":"","code":"# With `survfit()` fit <- survfit(Surv(time, status) ~ sex, data = df_lung) fit #> Call: survfit(formula = Surv(time, status) ~ sex, data = df_lung) #>  #>              n events median 0.95LCL 0.95UCL #> sex=Male   138    112   8.87    6.97    10.2 #> sex=Female  90     53  14.00   11.43    18.1  # With `survfit2()` fit2 <- survfit2(Surv(time, status) ~ sex, data = df_lung) fit2 #> Call: survfit(formula = Surv(time, status) ~ sex, data = df_lung) #>  #>              n events median 0.95LCL 0.95UCL #> sex=Male   138    112   8.87    6.97    10.2 #> sex=Female  90     53  14.00   11.43    18.1  # Consistent behavior with other functions summary(fit, times = c(10, 20)) #> Call: survfit(formula = Surv(time, status) ~ sex, data = df_lung) #>  #>                 sex=Male  #>  time n.risk n.event survival std.err lower 95% CI upper 95% CI #>    10     44      76    0.423  0.0440        0.344        0.518 #>    20     13      27    0.145  0.0353        0.090        0.234 #>  #>                 sex=Female  #>  time n.risk n.event survival std.err lower 95% CI upper 95% CI #>    10     43      27    0.674  0.0523        0.579        0.785 #>    20     11      18    0.343  0.0634        0.239        0.493 #>   summary(fit2, times = c(10, 20)) #> Call: survfit(formula = Surv(time, status) ~ sex, data = df_lung) #>  #>                 sex=Male  #>  time n.risk n.event survival std.err lower 95% CI upper 95% CI #>    10     44      76    0.423  0.0440        0.344        0.518 #>    20     13      27    0.145  0.0353        0.090        0.234 #>  #>                 sex=Female  #>  time n.risk n.event survival std.err lower 95% CI upper 95% CI #>    10     43      27    0.674  0.0523        0.579        0.785 #>    20     11      18    0.343  0.0634        0.239        0.493 #>"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2_p.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate p-value — survfit2_p","title":"Calculate p-value — survfit2_p","text":"function survfit2_p() wraps survival::survdiff() returns formatted p-value.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2_p.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate p-value — survfit2_p","text":"","code":"survfit2_p(x, pvalue_fun = format_p, prepend_p = TRUE, rho = 0)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2_p.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate p-value — survfit2_p","text":"x 'survfit2' object pvalue_fun function round style p-value prepend_p prepend \"p=\" formatted p-value rho argument passed  survival::survdiff(rho=)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2_p.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate p-value — survfit2_p","text":"string","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/survfit2_p.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate p-value — survfit2_p","text":"","code":"sf <- survfit2(Surv(time, status) ~ sex, data = df_lung)  sf %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable() +   labs(caption = glue::glue(\"Log-rank {survfit2_p(sf)}\"))   sf %>%   ggsurvfit() +   add_confidence_interval() +   add_risktable() +   annotate(\"text\", x = 2, y = 0.05, label = glue::glue(\"{survfit2_p(sf)}\"))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_ggsurvfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Survfit Plot Themes — theme_ggsurvfit","title":"Survfit Plot Themes — theme_ggsurvfit","text":"Returns ggplot list calls defining theme. theme_ggsurvfit_default(): Builds theme_bw() increased text sizes. theme_ggsurvfit_KMunicate(): Theme create KMunicate-styled figures. doi:10.1136/bmjopen-2019-030215","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_ggsurvfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Survfit Plot Themes — theme_ggsurvfit","text":"","code":"theme_ggsurvfit_default()  theme_ggsurvfit_KMunicate()"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_ggsurvfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Survfit Plot Themes — theme_ggsurvfit","text":"ggplot2 theme","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_ggsurvfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Survfit Plot Themes — theme_ggsurvfit","text":"","code":"survfit2(Surv(time, status) ~ sex, data = df_lung) %>%   ggsurvfit(theme = theme_ggsurvfit_default())"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_risktable.html","id":null,"dir":"Reference","previous_headings":"","what":"Risk Table Themes — theme_risktable","title":"Risk Table Themes — theme_risktable","text":"Returns ggplot list calls defining theme meant applied risk table.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_risktable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Risk Table Themes — theme_risktable","text":"","code":"theme_risktable_default(axis.text.y.size = 10, plot.title.size = 10.75)  theme_risktable_boxed(axis.text.y.size = 10, plot.title.size = 10.75)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_risktable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Risk Table Themes — theme_risktable","text":"axis.text.y.size text size labels left risk table plot.title.size text size risk table title","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_risktable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Risk Table Themes — theme_risktable","text":"ggplot2 figure","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/theme_risktable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Risk Table Themes — theme_risktable","text":"","code":"p <- survfit2(Surv(time, status) ~ 1, data = df_lung) %>% ggsurvfit()  # default ------------------------------------ p + add_risktable(theme = theme_risktable_default())   # larger text -------------------------------- p +   add_risktable(     size = 4,     theme = theme_risktable_default(axis.text.y.size = 12,                                     plot.title.size = 14)   )   # boxed -------------------------------------- p + add_risktable(theme = theme_risktable_boxed())   # none --------------------------------------- p + add_risktable(theme = NULL, risktable_height = 0.20)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_cuminc.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy a cuminc object — tidy_cuminc","title":"Tidy a cuminc object — tidy_cuminc","text":"tidycmprsk package exports tidier \"cuminc\" objects. function adds top returns information.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_cuminc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidy a cuminc object — tidy_cuminc","text":"","code":"tidy_cuminc(x, times = NULL)"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_cuminc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidy a cuminc object — tidy_cuminc","text":"x 'cuminc' object created tidycmprsk::cuminc() times numeric vector times. Default NULL, returns observed times.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_cuminc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tidy a cuminc object — tidy_cuminc","text":"tibble","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_cuminc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tidy a cuminc object — tidy_cuminc","text":"","code":"library(tidycmprsk)  cuminc(Surv(ttdeath, death_cr) ~ trt, trial) %>%   tidy_cuminc() #> # A tibble: 228 × 16 #>     time outcome     strata estimate std.error conf.low conf.high n.risk n.event #>    <dbl> <chr>       <fct>     <dbl>     <dbl>    <dbl>     <dbl>  <int>   <int> #>  1  0    death from… Drug A   0         0      NA         NA          98       0 #>  2  3.53 death from… Drug A   0         0      NA         NA          98       0 #>  3  7.27 death from… Drug A   0.0102    0.0102  8.84e-4    0.0503     97       1 #>  4  7.38 death from… Drug A   0.0204    0.0144  3.90e-3    0.0652     96       1 #>  5  8.37 death from… Drug A   0.0204    0.0144  3.90e-3    0.0652     95       0 #>  6 10.1  death from… Drug A   0.0204    0.0144  3.90e-3    0.0652     94       0 #>  7 10.3  death from… Drug A   0.0204    0.0144  3.90e-3    0.0652     93       0 #>  8 10.5  death from… Drug A   0.0204    0.0144  3.90e-3    0.0652     92       0 #>  9 11.4  death from… Drug A   0.0306    0.0175  8.17e-3    0.0798     91       1 #> 10 11.8  death from… Drug A   0.0306    0.0175  8.17e-3    0.0798     90       0 #> # ℹ 218 more rows #> # ℹ 7 more variables: n.censor <int>, cum.event <int>, cum.censor <int>, #> #   strata_label <chr>, estimate_type <chr>, estimate_type_label <chr>, #> #   monotonicity_type <chr>"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_survfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy a survfit object — tidy_survfit","title":"Tidy a survfit object — tidy_survfit","text":"broom package exports tidier \"survfit\" objects. function adds top returns information. function also utilizes additional information stored survfit object created survfit2(). recommended always use function survfit2().","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_survfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidy a survfit object — tidy_survfit","text":"","code":"tidy_survfit(x, times = NULL, type = c(\"survival\", \"risk\", \"cumhaz\"))"},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_survfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidy a survfit object — tidy_survfit","text":"x 'survfit' object created survfit2() times numeric vector times. Default NULL, returns observed times. type type statistic report. Available Kaplan-Meier estimates . Default \"survival\". Must one following:","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_survfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tidy a survfit object — tidy_survfit","text":"tibble","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/reference/tidy_survfit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tidy a survfit object — tidy_survfit","text":"","code":"survfit2(Surv(time, status) ~ factor(ph.ecog), data = df_lung) %>%   tidy_survfit() #> # A tibble: 220 × 16 #>     time n.risk n.event n.censor cum.event cum.censor estimate std.error #>    <dbl>  <dbl>   <dbl>    <dbl>     <dbl>      <dbl>    <dbl>     <dbl> #>  1 0         63       0        0         0          0    1        0      #>  2 0.164     63       1        0         1          0    0.984    0.0160 #>  3 0.361     62       1        0         2          0    0.968    0.0228 #>  4 0.493     61       1        0         3          0    0.952    0.0282 #>  5 1.02      60       1        0         4          0    0.937    0.0328 #>  6 1.74      59       1        0         5          0    0.921    0.0370 #>  7 2.14      58       1        0         6          0    0.905    0.0409 #>  8 2.66      57       1        0         7          0    0.889    0.0445 #>  9 4.83      56       1        0         8          0    0.873    0.0480 #> 10 5.45      55       1        0         9          0    0.857    0.0514 #> # ℹ 210 more rows #> # ℹ 8 more variables: conf.high <dbl>, conf.low <dbl>, strata <fct>, #> #   estimate_type <chr>, estimate_type_label <chr>, monotonicity_type <chr>, #> #   strata_label <chr>, conf.level <dbl>"},{"path":[]},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"ggsurvfit-030","dir":"Changelog","previous_headings":"","what":"ggsurvfit 0.3.0","title":"ggsurvfit 0.3.0","text":"CRAN release: 2023-03-16 Added feature add_risktable(risktable_stats=) accept glue-like syntax—anything inside curly brackets evaluated. Users can now place multiple types statistics row, including allowing users style statistics way like adding rounding/formatting functions within curly brackets. Users may now also display estimates confidence limits risk table. (#135) Updated ggsurvfit(), tidy_survfit(), survfit2() handle survival::coxph() models. (#9) Updated default margin size risktable added figure. Namely, primary plot’s bottom margin set zero, along risktable’s top bottom margin. Moreover, top bottom margin legend also set zero.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"ggsurvfit-021","dir":"Changelog","previous_headings":"","what":"ggsurvfit 0.2.1","title":"ggsurvfit 0.2.1","text":"CRAN release: 2022-12-06 calls aes() migrated ggplot() individual geoms, e.g. geom_step(). done adding aes() call ggplot() led error later geom added user-created data. (#127) Delay adding conf.low conf.high ggplot aes() add_confidence_interval() called. Previously, added first call ggplot(tidy_data, aes(x = time, y = estimate, ymin = conf.low, ymax = conf.high)). result figures show confidence interval still created space CI plot area. update eliminates blank space. (#123) Migrated ‘scales’ package ‘Imports:’ ‘Suggests:’, .e. strong weak dependency. (#120) Updated ggplot size= argument linewidth= needed ggplot2 v3.4.0 (#131)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"ggsurvfit-020","dir":"Changelog","previous_headings":"","what":"ggsurvfit 0.2.0","title":"ggsurvfit 0.2.0","text":"CRAN release: 2022-10-15","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"breaking-changes-0-2-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"ggsurvfit 0.2.0","text":"Changed default ggsurvfit_build(combine_plots=) argument TRUE.","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"new-features-0-2-0","dir":"Changelog","previous_headings":"","what":"New features","title":"ggsurvfit 0.2.0","text":"Added function add_pvalue() place p-values figure caption text annotation. Added add_quantile(x_value=) argument places line segments time specified. Added scale_ggsurvfit() function wraps ggplot2::scale_x_continuous() ggplot2::scale_y_continuous() uses reduced padding (via expand= argument), labels y-axis percentages (labels=), adds additional break points x-axis (n.breaks=8), sets y-axis limits c(0, 1) (limits=). (#82) Added function add_legend_title() adds title strata figure legend. Package now depends {ggplot2}, meaning ’ll attached anytime {ggsurvfit} attached. (#62) Added S3 methods grid.draw.ggsurvfit() grid.draw.ggcuminc() turn allows us save images package directly ggplot2::ggsave() (#107) Added support multi-state models created survfit(), .e. competing risks survival package. (#83)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"minor-improvements-and-fixes-0-2-0","dir":"Changelog","previous_headings":"","what":"Minor improvements and fixes","title":"ggsurvfit 0.2.0","text":"Updated default behavior add_risktable(risktable_group='auto') minimize number risk tables appear figure. (#117) Increased default font size plot risk tables, added arguments control font size risk table theme. (#103) using CDISC ADTTE data frame, label saved PARAM/PARAMCD used default x-axis label ggsurvfit(). (#97) survfit(weights=) argument utilized, number risk, number observed events, etc. non-integer numbers. counts risk table now rounded nearest integer. (#90) Converted gallery vignette article. (#75) Bug fix Surv_CNSR() used conjunction ggsurvfit(). default x-axis label incorrectly attributed stratifying variable, present. (#100) Fix survfit2() allows users pass arguments non-standard evaluation, .e. bare column names. (#90)","code":""},{"path":"http://www.danieldsjoberg.com/ggsurvfit/dev/news/index.html","id":"ggsurvfit-010","dir":"Changelog","previous_headings":"","what":"ggsurvfit 0.1.0","title":"ggsurvfit 0.1.0","text":"CRAN release: 2022-08-27 First release.","code":""}]
